<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<dom-module id="user-menu-element">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      user-menu {
        display: inline-block;
      }

      .name {
        line-height: 44px;
        margin-right: 10px;
      }

      gravatar-component > ::content img {
        border-radius: 50%;
        border: 2px solid #3f51b5;
      }

      gravatar-component > ::content img:hover {
          border: 2px solid #fff;
      }
    </style>

    <div class="user-menu">
      <gravatar-component class="pull-right" email="[[user.email]]" size="40" alt-text="[[menuText]]"></gravatar-component>
      <span class="name pull-right">[[menuText]]</span>
    </div>

    <iron-signals on-iron-signal-user-menu="_updateUser"></iron-signals>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'user-menu-element',

        properties: {
          user: {
            type: Object,
            value: function() {
              return {
                firstName: FIRST_NAME,
                lastName: LAST_NAME,
                email: EMAIL
              }
            }
          },
          menuText: {
            type: String,
            computed: '_computeMenuText(user.firstName, user.lastName, user.email)'
          }
        },
        ready: function() {

        },
        _computeMenuText: function(firstName, lastName, email) {
          return (!firstName || !lastName) ? email : firstName + ' ' + lastName;
        },
        _updateUser: function(e) {
          this.set('user.firstName', e.detail.firstName);
          this.set('user.lastName', e.detail.lastName);
        }
      });
    })();
  </script>
</dom-module>
